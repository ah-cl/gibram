# GibRAM Configuration File
# Graph in-Buffer Retrieval & Associative Memory
# Copy this to config.yaml and customize

server:
  addr: ":6161"
  data_dir: "./data"
  vector_dim: 1536

tls:
  # PRODUCTION: Use custom certificates (recommended)
  # Generate with: openssl req -x509 -newkey rsa:4096 -nodes \
  #   -keyout /etc/gibram/certs/server.key \
  #   -out /etc/gibram/certs/server.crt \
  #   -days 365 -subj "/CN=yourdomain.com"
  # Or use Let's Encrypt with certbot
  cert_file: ""  # Path to certificate file (e.g., /etc/gibram/certs/server.crt)
  key_file: ""   # Path to private key file (e.g., /etc/gibram/certs/server.key)
  
  # DEVELOPMENT ONLY: Auto-generate self-signed certificate
  # WARNING: Not secure for production! Clients must skip certificate verification.
  auto_cert: true
  
  # INSECURE MODE (DEV ONLY): Start server with --insecure flag to disable TLS entirely
  # DO NOT USE IN PRODUCTION

auth:
  keys:
    # Admin key - full access
    - id: "admin"
      key: "gibram_admin_change_me_in_production"
      permissions: ["admin"]
    
    # Application key - read/write access
    - id: "app-service"
      key: "gibram_app_change_me_in_production"
      permissions: ["write"]
    
    # Read-only key
    - id: "query-service"
      key: "gibram_query_change_me_in_production"
      permissions: ["read"]

security:
  # Max frame size (4MB default)
  max_frame_size: 4194304
  
  # Rate limiting per API key
  rate_limit: 1000  # requests per second
  rate_burst: 100   # burst allowance
  
  # Connection timeouts
  idle_timeout: 300s      # idle connection timeout
  unauth_timeout: 10s     # timeout for unauthenticated connections
  max_conns_per_ip: 50    # max connections per IP

logging:
  level: "info"    # debug, info, warn, error
  format: "text"   # json, text
  output: "stdout" # stdout, file
  file: ""         # log file path if output=file
